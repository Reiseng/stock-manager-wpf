<UserControl x:Class="StockControl.Views.Users.UsersView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="Auto" Width="Auto">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Title of section -->
        <Border Grid.Row="0"
                Background="#2D2D30"
                Padding="10"
                CornerRadius="5"
                Margin="0,0,0,10">
            <TextBlock Text="Listado de usuarios"
                       FontSize="22"
                       FontWeight="Bold"
                       Foreground="White"/>
        </Border>

        <!-- Search box + buttons -->
        <Grid Grid.Row="1"
              Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Search box -->
            <Grid Grid.Column="0"
                  Width="Auto"
                  Height="30"
                  Margin="0,0,10,0">
                <TextBox
                    Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                    VerticalContentAlignment="Center"
                    Loaded="SearchBox_Loaded"/>

                <TextBlock Text="Buscar Usuario..."
                           Foreground="Gray"
                           Margin="5,0,0,0"
                           VerticalAlignment="Center"
                           IsHitTestVisible="False"
                           Visibility="{Binding SearchText,
                                Converter={StaticResource StringNullOrEmptyToVisibilityConverter}}"/>
            </Grid>

            <!-- Buttons -->
            <StackPanel Grid.Column="1"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right">
                <Button Content="Agregar"
                        Width="80"
                        Height="30"
                        Margin="0,0,10,0"
                        Command="{Binding AddCommand}"/>

                <Button Content="Editar"
                        Width="80"
                        Height="30"
                        Margin="0,0,10,0"
                        Command="{Binding EditCommand}"/>
                <Button Content="Eliminar"
                        Width="80"
                        Height="30"
                        Margin="0,0,10,0"
                        Command="{Binding DeleteCommand}"/>
            </StackPanel>
        </Grid>

        <!-- List of users -->
        <DataGrid Grid.Row="2"
                  ItemsSource="{Binding Users}"
                  AutoGenerateColumns="False"
                  SelectedItem="{Binding SelectedUser, Mode=TwoWay}"
                  CanUserAddRows="False"
                  IsReadOnly="True">

            <DataGrid.Columns>
                <DataGridTextColumn Header="Nombre de usuario"
                                    Binding="{Binding Username}"
                                    Width="*"/>
                <DataGridTextColumn Header="Permisos"
                                    Binding="{Binding Role,
                                        Converter={StaticResource EnumDescriptionConverter}}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>
