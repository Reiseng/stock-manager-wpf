<UserControl x:Class="StockControl.Views.Clients.ClientView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Title of section -->
        <Border Grid.Row="0"
                Background="#2D2D30"
                Padding="10"
                CornerRadius="5"
                Margin="0,0,0,10">
            <TextBlock Text="Listado de clientes"
                       FontSize="22"
                       FontWeight="Bold"
                       Foreground="White"/>
        </Border>

        <!-- Search box + buttons -->
        <Grid Grid.Row="1"
              Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Search box -->
            <Grid Grid.Column="0"
                  Width="Auto"
                  Height="30"
                  Margin="0,0,10,0">
                <TextBox
                    Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                    VerticalContentAlignment="Center"
                    Loaded="SearchBox_Loaded"/>

                <TextBlock Text="Buscar cliente..."
                           Foreground="Gray"
                           Margin="5,0,0,0"
                           VerticalAlignment="Center"
                           IsHitTestVisible="False"
                           Visibility="{Binding SearchText,
                                Converter={StaticResource StringNullOrEmptyToVisibilityConverter}}"/>
            </Grid>

            <!-- Buttons -->
            <StackPanel Grid.Column="1"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right">
                <Button Content="Agregar"
                        Width="80"
                        Height="30"
                        Margin="0,0,10,0"
                        Command="{Binding AddCommand}"/>

            <Button Content="Editar"
                    Width="80"
                    Height="30"
                    Margin="0,0,10,0"
                    Command="{Binding EditCommand}"
                    IsEnabled="{Binding CanEditClients}"
                    Visibility="{Binding ViewMode,
                                        Converter={StaticResource ModeToVisibilityConverter},
                                        ConverterParameter=Editable}"/>
            <Button Content="Eliminar"
                    Width="80"
                    Height="30"
                    Margin="0,0,10,0"
                    Command="{Binding DeleteCommand}"
                    IsEnabled="{Binding CanEditClients}"
                    Visibility="{Binding ViewMode,
                                        Converter={StaticResource ModeToVisibilityConverter},
                                        ConverterParameter=Editable}"/>
            <Button Content="Seleccionar"
                    Width="80"
                    Height="30"
                    Margin="0,0,10,0"
                    Command="{Binding ConfirmCommand}"
                    IsEnabled="{Binding CanEditClients}"
                    Visibility="{Binding ViewMode,
                                        Converter={StaticResource ModeToVisibilityConverter},
                                        ConverterParameter=SelectOnly}" />
            </StackPanel>
        </Grid>

        <!-- List of clients -->
        <DataGrid Grid.Row="2"
                  ItemsSource="{Binding Clients}"
                  SelectedItem="{Binding SelectedClient, Mode=TwoWay}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  IsReadOnly="True">

            <DataGrid.Columns>
                <DataGridTextColumn Header="Dni/Cuil"
                                    Binding="{Binding Dni}"
                                    Width="*"/>
                <DataGridTextColumn Header="Apellido"
                                    Binding="{Binding LastName}"
                                    Width="*"/>
                <DataGridTextColumn Header="Nombre"
                                    Binding="{Binding Name}"
                                    Width="2*"/>
                <DataGridTextColumn Header="Email"
                                    Binding="{Binding Email}"
                                    Width="Auto"/>
                <DataGridTextColumn Header="Phone"
                                    Binding="{Binding Phone}"
                                    Width="Auto"/>
                <DataGridTextColumn Header="Address"
                                    Binding="{Binding Address}"
                                    Width="Auto"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>
